{"ast":null,"code":"import React, { useRef, useState, useEffect } from 'react';\nimport { Key } from '../../types.js';\nimport { focusFirstFocusableNode, findFirstKeyboardFocusableNode, findLastKeyboardFocusableNode, focusFirstKeyboardFocusableNode, focusLastKeyboardFocusableNode } from '../../utilities/focus.js';\nimport { portal } from '../shared.js';\nimport { useFocusManager } from '../../utilities/focus-manager/hooks.js';\nimport { Focus } from '../Focus/Focus.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nimport { KeypressListener } from '../KeypressListener/KeypressListener.js';\nfunction TrapFocus({\n  trapping = true,\n  children\n}) {\n  const {\n    canSafelyFocus\n  } = useFocusManager({\n    trapping\n  });\n  const focusTrapWrapper = useRef(null);\n  const [disableFocus, setDisableFocus] = useState(true);\n  useEffect(() => {\n    const disable = canSafelyFocus && !(focusTrapWrapper.current && focusTrapWrapper.current.contains(document.activeElement)) ? !trapping : true;\n    setDisableFocus(disable);\n  }, [canSafelyFocus, trapping]);\n  const handleFocusIn = event => {\n    const containerContentsHaveFocus = focusTrapWrapper.current && focusTrapWrapper.current.contains(document.activeElement);\n    if (trapping === false || !focusTrapWrapper.current || containerContentsHaveFocus || event.target instanceof Element && event.target.matches(`${portal.selector} *`)) {\n      return;\n    }\n    if (canSafelyFocus && event.target instanceof HTMLElement && focusTrapWrapper.current !== event.target && !focusTrapWrapper.current.contains(event.target)) {\n      focusFirstFocusableNode(focusTrapWrapper.current);\n    }\n  };\n  const handleTab = event => {\n    if (trapping === false || !focusTrapWrapper.current) {\n      return;\n    }\n    const firstFocusableNode = findFirstKeyboardFocusableNode(focusTrapWrapper.current);\n    const lastFocusableNode = findLastKeyboardFocusableNode(focusTrapWrapper.current);\n    if (event.target === lastFocusableNode && !event.shiftKey) {\n      event.preventDefault();\n      focusFirstKeyboardFocusableNode(focusTrapWrapper.current);\n    }\n    if (event.target === firstFocusableNode && event.shiftKey) {\n      event.preventDefault();\n      focusLastKeyboardFocusableNode(focusTrapWrapper.current);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Focus, {\n    disabled: disableFocus,\n    root: focusTrapWrapper.current\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: focusTrapWrapper\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"focusin\",\n    handler: handleFocusIn\n  }), /*#__PURE__*/React.createElement(KeypressListener, {\n    keyCode: Key.Tab,\n    keyEvent: \"keydown\",\n    handler: handleTab\n  }), children));\n}\nexport { TrapFocus };","map":{"version":3,"names":["React","useRef","useState","useEffect","Key","focusFirstFocusableNode","findFirstKeyboardFocusableNode","findLastKeyboardFocusableNode","focusFirstKeyboardFocusableNode","focusLastKeyboardFocusableNode","portal","useFocusManager","Focus","EventListener","KeypressListener","TrapFocus","trapping","children","canSafelyFocus","focusTrapWrapper","disableFocus","setDisableFocus","disable","current","contains","document","activeElement","handleFocusIn","event","containerContentsHaveFocus","target","Element","matches","selector","HTMLElement","handleTab","firstFocusableNode","lastFocusableNode","shiftKey","preventDefault","createElement","disabled","root","ref","handler","keyCode","Tab","keyEvent"],"sources":["/Users/shannondutton/Documents/Code Projects/ProductCreator/node_modules/@shopify/polaris/build/esm/components/TrapFocus/TrapFocus.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { Key } from '../../types.js';\nimport { focusFirstFocusableNode, findFirstKeyboardFocusableNode, findLastKeyboardFocusableNode, focusFirstKeyboardFocusableNode, focusLastKeyboardFocusableNode } from '../../utilities/focus.js';\nimport { portal } from '../shared.js';\nimport { useFocusManager } from '../../utilities/focus-manager/hooks.js';\nimport { Focus } from '../Focus/Focus.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nimport { KeypressListener } from '../KeypressListener/KeypressListener.js';\n\nfunction TrapFocus({\n  trapping = true,\n  children\n}) {\n  const {\n    canSafelyFocus\n  } = useFocusManager({\n    trapping\n  });\n  const focusTrapWrapper = useRef(null);\n  const [disableFocus, setDisableFocus] = useState(true);\n  useEffect(() => {\n    const disable = canSafelyFocus && !(focusTrapWrapper.current && focusTrapWrapper.current.contains(document.activeElement)) ? !trapping : true;\n    setDisableFocus(disable);\n  }, [canSafelyFocus, trapping]);\n  const handleFocusIn = event => {\n    const containerContentsHaveFocus = focusTrapWrapper.current && focusTrapWrapper.current.contains(document.activeElement);\n    if (trapping === false || !focusTrapWrapper.current || containerContentsHaveFocus || event.target instanceof Element && event.target.matches(`${portal.selector} *`)) {\n      return;\n    }\n    if (canSafelyFocus && event.target instanceof HTMLElement && focusTrapWrapper.current !== event.target && !focusTrapWrapper.current.contains(event.target)) {\n      focusFirstFocusableNode(focusTrapWrapper.current);\n    }\n  };\n  const handleTab = event => {\n    if (trapping === false || !focusTrapWrapper.current) {\n      return;\n    }\n    const firstFocusableNode = findFirstKeyboardFocusableNode(focusTrapWrapper.current);\n    const lastFocusableNode = findLastKeyboardFocusableNode(focusTrapWrapper.current);\n    if (event.target === lastFocusableNode && !event.shiftKey) {\n      event.preventDefault();\n      focusFirstKeyboardFocusableNode(focusTrapWrapper.current);\n    }\n    if (event.target === firstFocusableNode && event.shiftKey) {\n      event.preventDefault();\n      focusLastKeyboardFocusableNode(focusTrapWrapper.current);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Focus, {\n    disabled: disableFocus,\n    root: focusTrapWrapper.current\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: focusTrapWrapper\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"focusin\",\n    handler: handleFocusIn\n  }), /*#__PURE__*/React.createElement(KeypressListener, {\n    keyCode: Key.Tab,\n    keyEvent: \"keydown\",\n    handler: handleTab\n  }), children));\n}\n\nexport { TrapFocus };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}